import{u as C,A as E,B as M,c as _,C as v,a as D,D as S,b as H,E as $,f as B,G as q,w,k as T,H as z}from"./2gGs3lyZ.js";function K(t,e){const o=e/t*100;return 2/Math.PI*100*Math.atan(o/50)}function G(t={}){const{duration:e=2e3,throttle:o=200,hideDelay:s=500,resetDelay:l=400}=t,u=t.estimatedProgress||K,r=C(),n=_(0),i=_(!1),f=_(!1);let m=!1,h,x,b,I;const y=()=>{f.value=!1,k(0)};function k(a=0){if(!r.isHydrating){if(a>=100)return c();d(),n.value=a<0?0:a,o?x=setTimeout(()=>{i.value=!0,P()},o):(i.value=!0,P())}}function L(){b=setTimeout(()=>{i.value=!1,I=setTimeout(()=>{n.value=0},l)},s)}function c(a={}){n.value=100,m=!0,d(),A(),a.error&&(f.value=!0),a.force?(n.value=0,i.value=!1):L()}function A(){clearTimeout(b),clearTimeout(I)}function d(){clearTimeout(x),cancelAnimationFrame(h)}function P(){m=!1;let a;function g(p){if(m)return;a??(a=p);const F=p-a;n.value=Math.max(0,Math.min(100,u(e,F))),h=requestAnimationFrame(g)}h=requestAnimationFrame(g)}let N=()=>{};{const a=r.hook("page:loading:start",()=>{y()}),g=r.hook("page:loading:end",()=>{c()}),p=r.hook("vue:error",()=>c());N=()=>{p(),a(),g(),d()}}return{_cleanup:N,progress:v(()=>n.value),isLoading:v(()=>i.value),error:v(()=>f.value),start:y,set:k,finish:c,clear:d}}function O(t={}){const e=C(),o=e._loadingIndicator=e._loadingIndicator||G(t);return E()&&(e._loadingIndicatorDeps=e._loadingIndicatorDeps||0,e._loadingIndicatorDeps++,M(()=>{e._loadingIndicatorDeps--,e._loadingIndicatorDeps===0&&(o._cleanup(),delete e._loadingIndicator)})),o}const R=D({name:"NuxtLoadingIndicator",props:{throttle:{type:Number,default:200},duration:{type:Number,default:2e3},height:{type:Number,default:3},color:{type:[String,Boolean],default:"repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%)"},errorColor:{type:String,default:"repeating-linear-gradient(to right,#f87171 0%,#ef4444 100%)"},estimatedProgress:{type:Function,required:!1}},setup(t,{slots:e,expose:o}){const{progress:s,isLoading:l,error:u,start:r,finish:n,clear:i}=O({duration:t.duration,throttle:t.throttle,estimatedProgress:t.estimatedProgress});return o({progress:s,isLoading:l,error:u,start:r,finish:n,clear:i}),()=>S("div",{class:"nuxt-loading-indicator",style:{position:"fixed",top:0,right:0,left:0,pointerEvents:"none",width:"auto",height:`${t.height}px`,opacity:l.value?1:0,background:u.value?t.errorColor:t.color||void 0,backgroundSize:`${100/s.value*100}% auto`,transform:`scaleX(${s.value}%)`,transformOrigin:"left",transition:"transform 0.1s, height 0.4s, opacity 0.4s",zIndex:999999}},e)}}),X=D({__name:"app",setup(t){const e=H(),o=[{label:"Home",to:"/"},{label:"About",to:"/about"},{label:"Parent (index)",to:"/parent"},{label:"Parent (b)",to:"/parent/b"},{label:"Keyed child",onClick:()=>e.push(`/parent/reload-${(Math.random()*100).toFixed()}`)},{label:"Non-Keyed child",onClick:()=>e.push(`/parent/static-${(Math.random()*100).toFixed()}`)}];return(s,l)=>{const u=R,r=z,n=$("NuxtExample");return B(),q(n,{dir:"routing/pages",nav:o,"current-route":""},{default:w(()=>[T(u),T(r)]),_:1})}}});export{X as default};
